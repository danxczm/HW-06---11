{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aCAAA,EAAA,SDIA,IAAIC,EAAiB,IAAIC,EAAAC,GAAJ,CAAmB,wBACxC,MAAMC,EAAO,CACXC,QAASC,SAASC,cAAc,SAChCC,OAAQF,SAASC,cAAc,gBAC/BE,YAAaH,SAASC,cAAc,YACpCG,eAAgBJ,SAASC,cAAc,eAGnCI,EAAqB,ICPZ,MAMbC,sBACE,MAAMC,EAAM,uJAAkHC,KAAKC,UAAUD,KAAKE,cAElJ,aAAaC,MAAMJ,GAChBK,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJP,KAAKQ,gBACED,KAIbC,gBACER,KAAKC,MAAQ,EAGfQ,YACET,KAAKC,KAAO,EAGVS,YACF,OAAOV,KAAKE,YAGVQ,UAAMC,GACRX,KAAKE,YAAcS,EA7BrBC,cACEZ,KAAKE,YAAc,GACnBF,KAAKC,KAAO,ID6DhB,SAASY,EAAeN,GACtB,MAAMO,EAASP,EAAKQ,KACjBC,KACC,EAACC,KAAEA,EAAIC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,UAAEA,KACjD,iGAGOL,mEAGHI,mEAGEC,qCAECH,+FAE8BA,gBAA4BD,WAAsBE,gDAK1FG,KAAK,IACRjC,EAAKK,YAAY6B,mBAAmB,YAAaV,GAGnD,SAASW,IACPnC,EAAKK,YAAY+B,UAAY,GAC7BpC,EAAKC,QAAQoC,MAAQ,GAlFrB9B,EAAmB+B,gBAAgBxB,MAAKG,IACtCM,EAAeN,GACfpB,EAAe0C,aAMnBvC,EAAKI,OAAOoC,iBAAiB,UAG7B,SAAkBC,GAChBA,EAAEC,iBACFnC,EAAmBa,MAAQqB,EAAEE,cAAcC,SAAShC,YAAYyB,MAEhE9B,EAAmBY,YAEnBZ,EAAmB+B,gBAAgBxB,MAAKG,IACtC,GAAmB,IAAfA,EAAK4B,MAMP,OALAlD,EAAAmD,OAAOC,QACL,4EAEF/C,EAAKM,eAAe0C,UAAUC,IAAI,kBAClCd,IAIFnC,EAAKM,eAAe0C,UAAUE,OAAO,aACrCf,IACAZ,EAAeN,GACfpB,EAAe0C,UACXtB,EAAK4B,MAAQ,IACf7C,EAAKM,eAAe0C,UAAUC,IAAI,aAEpCtD,EAAAmD,OAAOK,KAAK,oBAAoBlC,EAAKmC,2BAzBzCpD,EAAKM,eAAekC,iBAAiB,SA6BrC,WACEjC,EACG+B,gBACAxB,MAAKG,IACAA,EAAKQ,KAAK4B,OAAS,KACrB1D,EAAAmD,OAAOK,KACL,8DAEFnD,EAAKM,eAAe0C,UAAUC,IAAI,cAE7BhC,KAERH,KAAKS,GACR1B,EAAe0C,aAkCjB,IAAIe,EAAWpD,SAASqD,eAAe,SACvCC,OAAOC,SAAW,KAGdvD,SAASwD,KAAKC,UAAY,KAC1BzD,SAAS0D,gBAAgBD,UAAY,IAErCL,EAASO,MAAMC,QAAU,QAEzBR,EAASO,MAAMC,QAAU,QAG7BR,EAASd,iBAAiB,SAE1B,WACEtC,SAASwD,KAAKC,UAAY,EAC1BzD,SAAS0D,gBAAgBD,UAAY","sources":["src/js/11/index.js","src/js/11/get-pictures-API.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport PicturesApiService from './get-pictures-API';\nlet simpleLightBox = new SimpleLightbox('.simple_light_box-js');\nconst refs = {\n  inputEl: document.querySelector('input'),\n  formEl: document.querySelector('.search-form'),\n  containerEl: document.querySelector('.gallery'),\n  loadMoreButton: document.querySelector('.load-more'),\n};\n\nconst picturesApiService = new PicturesApiService();\n\nfunction renderPopularOnLoadPage() {\n  picturesApiService.fetchPictures().then(data => {\n    renderPictures(data);\n    simpleLightBox.refresh();\n  });\n}\n\nrenderPopularOnLoadPage();\n\nrefs.formEl.addEventListener('submit', onSearch);\nrefs.loadMoreButton.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  picturesApiService.query = e.currentTarget.elements.searchQuery.value;\n\n  picturesApiService.resetPage();\n\n  picturesApiService.fetchPictures().then(data => {\n    if (data.total === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      refs.loadMoreButton.classList.add('is-hidden');\n      clearPicturesContainer();\n      return;\n    }\n\n    refs.loadMoreButton.classList.remove('is-hidden');\n    clearPicturesContainer();\n    renderPictures(data);\n    simpleLightBox.refresh();\n    if (data.total < 40) {\n      refs.loadMoreButton.classList.add('is-hidden');\n    }\n    Notify.info(`Hooray! We found ${data.totalHits} images.`);\n  });\n}\n\nfunction onLoadMore() {\n  picturesApiService\n    .fetchPictures()\n    .then(data => {\n      if (data.hits.length < 40) {\n        Notify.info(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        refs.loadMoreButton.classList.add('is-hidden');\n      }\n      return data;\n    })\n    .then(renderPictures);\n  simpleLightBox.refresh();\n}\n\nfunction renderPictures(data) {\n  const markup = data.hits\n    .map(\n      ({ user, webformatURL, largeImageURL, tags, likes, downloads }) =>\n        `<div class=\"photo-card\">\n      <div class=\"info\">\n\t\t\t<p class=\"info-item\">\n          <b>${user}</b>\n        </p>\n        <p class=\"info-item\">\n          ❤ ${likes}</p>\n        </p>\n        <p class=\"info-item\">\n          ⬇ ${downloads}\n        </p>\n\t\t\t\t<a href=\"${largeImageURL}\" target=”_blank”>Download</a>\n\t\t\t\t</div>\n      <a class=\"simple_light_box-js\" href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/></a>\n\n    </div>\n    `\n    )\n    .join('');\n  refs.containerEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearPicturesContainer() {\n  refs.containerEl.innerHTML = '';\n  refs.inputEl.value = '';\n}\n\nlet mybutton = document.getElementById('myBtn');\nwindow.onscroll = () => scrollFunction();\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > 1000 ||\n    document.documentElement.scrollTop > 1000\n  ) {\n    mybutton.style.display = 'block';\n  } else {\n    mybutton.style.display = 'none';\n  }\n}\nmybutton.addEventListener('click', topFunction);\n\nfunction topFunction() {\n  document.body.scrollTop = 0;\n  document.documentElement.scrollTop = 0;\n}\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst API_KEY = '17779447-e69189bbb9578e7ff1877c42f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default class PicturesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async fetchPictures() {\n    const url = `${BASE_URL}?key=${API_KEY}&per_page=40&image_type=photo&lang=en,ru&orientation=horizontal&safesearch=true&page=${this.page}&q=${this.searchQuery}`;\n\n    return await fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        this.incrementPage();\n        return data;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$iQIUW","parcelRequire","$140d90a7c3fd394f$var$simpleLightBox","$parcel$interopDefault","$fZKcF","$140d90a7c3fd394f$var$refs","inputEl","document","querySelector","formEl","containerEl","loadMoreButton","$140d90a7c3fd394f$var$picturesApiService","async","url","this","page","searchQuery","fetch","then","response","json","data","incrementPage","resetPage","query","newQuery","constructor","$140d90a7c3fd394f$var$renderPictures","markup","hits","map","user","webformatURL","largeImageURL","tags","likes","downloads","join","insertAdjacentHTML","$140d90a7c3fd394f$var$clearPicturesContainer","innerHTML","value","fetchPictures","refresh","addEventListener","e","preventDefault","currentTarget","elements","total","Notify","failure","classList","add","remove","info","totalHits","length","$140d90a7c3fd394f$var$mybutton","getElementById","window","onscroll","body","scrollTop","documentElement","style","display"],"version":3,"file":"01-search-form.d82878f1.js.map"}