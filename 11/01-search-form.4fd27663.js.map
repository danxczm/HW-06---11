{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAA,EAAA,SDKA,MAAMC,EAAO,CACXC,QAASC,SAASC,cAAc,SAChCC,OAAQF,SAASC,cAAc,gBAC/BE,YAAaH,SAASC,cAAc,YACpCG,eAAgBJ,SAASC,cAAc,eAGnCI,EAAqB,ICPZ,MAMbC,sBACE,MAAMC,EAAM,uJAAkHC,KAAKC,UAAUD,KAAKE,cAElJ,aAAaC,MAAMJ,GAChBK,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACJP,KAAKQ,gBACED,KAIbC,gBACER,KAAKC,MAAQ,EAGfQ,YACET,KAAKC,KAAO,EAGVS,YACF,OAAOV,KAAKE,YAGVQ,UAAMC,GACRX,KAAKE,YAAcS,EA7BrBC,cACEZ,KAAKE,YAAc,GACnBF,KAAKC,KAAO,ID0DhB,SAASY,EAAeN,GACtB,MAAMO,EAASP,EAAKQ,KACjBC,KACC,EAACC,KAAEA,EAAIC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,UAAEA,KACjD,iGAGOL,kEAGJI,kEAGEC,qCAEEH,kEAEGD,WAAsBE,4CAKnCG,KAAK,IACRjC,EAAKK,YAAY6B,mBAAmB,YAAaV,GAGnD,SAASW,IACPnC,EAAKK,YAAY+B,UAAY,GAC7BpC,EAAKC,QAAQoC,MAAQ,GA/ErB9B,EAAmB+B,gBAAgBxB,MAAKG,IACtCM,EAAeN,MAMnBjB,EAAKI,OAAOmC,iBAAiB,UAG7B,SAAkBC,GAChBA,EAAEC,iBACFlC,EAAmBa,MAAQoB,EAAEE,cAAcC,SAAS/B,YAAYyB,MAEhE9B,EAAmBY,YAEnBZ,EAAmB+B,gBAAgBxB,MAAKG,IACtC,GAAmB,IAAfA,EAAK2B,MAMP,OALA9C,EAAA+C,OAAOC,QACL,4EAEF9C,EAAKM,eAAeyC,UAAUC,IAAI,kBAClCb,IAIFnC,EAAKM,eAAeyC,UAAUE,OAAO,aACrCd,IACAZ,EAAeN,GACXA,EAAK2B,MAAQ,IACf5C,EAAKM,eAAeyC,UAAUC,IAAI,aAEpClD,EAAA+C,OAAOK,KAAK,oBAAoBjC,EAAKkC,2BAxBzCnD,EAAKM,eAAeiC,iBAAiB,SA4BrC,WACEhC,EACG+B,gBACAxB,MAAKG,IACAA,EAAKQ,KAAK2B,OAAS,KACrBtD,EAAA+C,OAAOK,KACL,8DAEFlD,EAAKM,eAAeyC,UAAUC,IAAI,cAE7B/B,KAERH,KAAKS,MAkCV,IAAI8B,EAAWnD,SAASoD,eAAe,SACvCC,OAAOC,SAAW,WAKdtD,SAASuD,KAAKC,UAAY,KAC1BxD,SAASyD,gBAAgBD,UAAY,IAErCL,EAASO,MAAMC,QAAU,QAEzBR,EAASO,MAAMC,QAAU,QAG7BR,EAASd,iBAAiB,SAE1B,WACErC,SAASuD,KAAKC,UAAY,EAC1BxD,SAASyD,gBAAgBD,UAAY","sources":["src/js/11/index.js","src/js/11/get-pictures-API.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n// import axios from 'axios';\n\nimport PicturesApiService from './get-pictures-API';\n\nconst refs = {\n  inputEl: document.querySelector('input'),\n  formEl: document.querySelector('.search-form'),\n  containerEl: document.querySelector('.gallery'),\n  loadMoreButton: document.querySelector('.load-more'),\n};\n\nconst picturesApiService = new PicturesApiService();\n\nfunction renderPopularOnLoadPage() {\n  picturesApiService.fetchPictures().then(data => {\n    renderPictures(data);\n  });\n}\n\nrenderPopularOnLoadPage();\n\nrefs.formEl.addEventListener('submit', onSearch);\nrefs.loadMoreButton.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  picturesApiService.query = e.currentTarget.elements.searchQuery.value;\n\n  picturesApiService.resetPage();\n\n  picturesApiService.fetchPictures().then(data => {\n    if (data.total === 0) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      refs.loadMoreButton.classList.add('is-hidden');\n      clearPicturesContainer();\n      return;\n    }\n\n    refs.loadMoreButton.classList.remove('is-hidden');\n    clearPicturesContainer();\n    renderPictures(data);\n    if (data.total < 40) {\n      refs.loadMoreButton.classList.add('is-hidden');\n    }\n    Notify.info(`Hooray! We found ${data.totalHits} images.`);\n  });\n}\n\nfunction onLoadMore() {\n  picturesApiService\n    .fetchPictures()\n    .then(data => {\n      if (data.hits.length < 40) {\n        Notify.info(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        refs.loadMoreButton.classList.add('is-hidden');\n      }\n      return data;\n    })\n    .then(renderPictures);\n}\n\nfunction renderPictures(data) {\n  const markup = data.hits\n    .map(\n      ({ user, webformatURL, largeImageURL, tags, likes, downloads }) =>\n        `<div class=\"photo-card\">\n      <div class=\"info\">\n\t\t\t<p class=\"info-item\">\n          <b>${user}</b>\n        </p>\n        <p class=\"info-item\">\n          ❤${likes}</p>\n        </p>\n        <p class=\"info-item\">\n          ⬇${downloads}\n        </p>\n\t\t\t\t<a href=\"${largeImageURL}\" target=\"_blank\">Download</a>\n      </div>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n\n    </div>\n    `\n    )\n    .join('');\n  refs.containerEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearPicturesContainer() {\n  refs.containerEl.innerHTML = '';\n  refs.inputEl.value = '';\n}\n\nlet mybutton = document.getElementById('myBtn');\nwindow.onscroll = function () {\n  scrollFunction();\n};\nfunction scrollFunction() {\n  if (\n    document.body.scrollTop > 1000 ||\n    document.documentElement.scrollTop > 1000\n  ) {\n    mybutton.style.display = 'block';\n  } else {\n    mybutton.style.display = 'none';\n  }\n}\nmybutton.addEventListener('click', topFunction);\n\nfunction topFunction() {\n  document.body.scrollTop = 0;\n  document.documentElement.scrollTop = 0;\n}\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst API_KEY = '17779447-e69189bbb9578e7ff1877c42f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default class PicturesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async fetchPictures() {\n    const url = `${BASE_URL}?key=${API_KEY}&per_page=40&image_type=photo&lang=en,ru&orientation=horizontal&safesearch=true&page=${this.page}&q=${this.searchQuery}`;\n\n    return await fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        this.incrementPage();\n        return data;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$iQIUW","parcelRequire","$140d90a7c3fd394f$var$refs","inputEl","document","querySelector","formEl","containerEl","loadMoreButton","$140d90a7c3fd394f$var$picturesApiService","async","url","this","page","searchQuery","fetch","then","response","json","data","incrementPage","resetPage","query","newQuery","constructor","$140d90a7c3fd394f$var$renderPictures","markup","hits","map","user","webformatURL","largeImageURL","tags","likes","downloads","join","insertAdjacentHTML","$140d90a7c3fd394f$var$clearPicturesContainer","innerHTML","value","fetchPictures","addEventListener","e","preventDefault","currentTarget","elements","total","Notify","failure","classList","add","remove","info","totalHits","length","$140d90a7c3fd394f$var$mybutton","getElementById","window","onscroll","body","scrollTop","documentElement","style","display"],"version":3,"file":"01-search-form.4fd27663.js.map"}